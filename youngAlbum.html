<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height,user-scalable=no">
    <style>
        @keyframes ani{
            from{transform:rotateX(0deg) rotateY(0deg) rotateZ(0deg)}
            to{transform:rotateX(900deg) rotateY(900deg) rotateZ(900deg)}
        }
        *{
            box-sizing: border-box;
        }
        html,body{
            position:fixed;
            overflow-y:hidden;
        }
        body{
            padding: 0;
            margin:0;
            position:relative;
        }
        #bac{
            width: 100%;
            height:100%;
            position: absolute;
        }
        #bac p{
            padding: 15px;
            margin-left: 15px;
            width: 100%;
            height:100%;
            position: absolute;
            top:0;
            left:0;
            font-size: 60px;
            font-weight: bold;
            color: blue;
            font-family: 微软雅黑;
            text-shadow: 0 0 20px red;
        }
        #bac img{
            width: 100%;
            height:100%;
            position: absolute;
            top:0;
            left:0;
            opacity: 0.8;
        }
        #starEff{
            width: 100%;
            height:100%;
            position: absolute;
            /*background: red;*/
        }
        .divBox{
            width: 100%;
            height:100%;
            position: absolute;
            top:0;
            left:0;
            transition:1s;
            display: none;
        }
        .divBox:nth-of-type(-n+4) div{border-radius: 50px;}
        .divBox:nth-of-type(-n+4) div img{border-radius: 20px;}
        .divBox:nth-of-type(-n+4) div span{border-radius: 20px;}
        .divBox div{
            text-align: center;
            position: absolute;
            top:0;
            left:0;
            /*border-radius:50px ;*/
            border: 10px double white;

        }
        .divBox>div img,.mengban{
            position:absolute;
            top:0;
            left:0;
        }
        .divBox>div img{
            margin-top:6.5% ;
            margin-left:10% ;
            width: 80%;
            height: 80%;
        }
        .mengban{
            background:black;
            opacity:0.5;
            width: 100%;
            height:100%;
        }
        #div2 img{
            margin-top:12.5% ;
            margin-left:10% ;
        }
        #div4 img,#div6 img{
            margin-top:14% ;
            margin-left:10% ;
        }
        #div7 img{
            margin-top:7% ;
            margin-left:10% ;
        }
        #div12 img{
            margin-top:3.5% ;
            margin-left:5% ;
            width: 90%;
            height: 90%;
        }

    </style>
    <title>纪念册</title>
    <script src="jquery-1.9.1.min.js"></script>
    <script>
        window.onload=function(){
            /*定义变量*/
            var windowClientWidth=document.documentElement.clientWidth||document.body.clientWidth;
            var windowClientHeight=document.documentElement.clientHeight||document.body.clientHeight;
            var startX=0;
            var startY=0;
            var endX=0;
            var endY=0;
            var lastRanBacNum=0;
            var songArr=["就算青春随风而谢,曾经少年在心里面永远是少年","幸福的时光像流沙","一点一点的蜕变,变成色彩斑斓的梦幻季节","实现的等待,初心不改",
            "那些温柔清风,最简单的守候","为青春而歌舞,学会勇敢领悟","紧握在手里的明天,留下纪念,我们还肩并肩",
            "你和我的心愿,友情的诺言,哼唱着永远","虔诚长出了羽翼,划破苍穹的夜莺","光阴似箭,初心不移,记忆点滴写进纪念册好好装进行李",
            "昨天藏在照片里,全部是青涩雨季","相遇是最美的风景,感谢你陪我同行","明天与阳光紧紧相拥,摇曳在青春里与时光邂逅"];
            /*var w1=120;
            var h1=84;
            var n1=0;
            var w2=60;
            var h2=80;
            var n2=0;*/
            var timer=null;
            /*var timer2=null;
            var timer3=null;
            var timer4=null;
            var timer5=null;*/
            /*获取元素*/
            var oBody=document.getElementsByTagName("body")[0];
            var obac=document.getElementById("bac");
            var oStarEff=document.getElementById("starEff");
            var oDiv=document.getElementsByClassName("divBox");
            /*设置第五版，5,6,7张图片的大小、位置*/
            with(oDiv[4].children[0].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                top=0;
                left=0;
                zIndex=6;
            }
            with(oDiv[4].children[1].style){
                width=windowClientWidth*0.95*0.75+"px";
                height=windowClientWidth*0.95+"px";
                left=Math.floor(windowClientWidth/2)-Math.floor(windowClientWidth*0.95*0.75/2)+"px";
                top=Math.floor(windowClientHeight/2)-Math.floor(windowClientWidth*0.95/2)+"px";
                zIndex=7;
            }
            with(oDiv[4].children[2].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                top=windowClientHeight-(windowClientWidth*0.8*0.7)+"px";
                left=windowClientWidth-(windowClientWidth*0.8)+"px";
                zIndex=8;
            }
            /*设置第五版，8,9,10,11张图片的大小、位置*/
            with(oDiv[5].children[0].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                top=0-windowClientWidth*0.8*0.7*0.2;
                left=0;
            }
            with(oDiv[5].children[1].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                left=windowClientWidth+"px";
                top=windowClientWidth*0.8*0.7-windowClientWidth*0.8*0.7*0.2+"px";
            }
            with(oDiv[5].children[2].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                top=windowClientWidth*0.8*0.7*2-windowClientWidth*0.8*0.7*0.4+"px";
                left=-windowClientWidth*0.8+"px";

            }
            with(oDiv[5].children[3].style){
                width=windowClientWidth*0.8+"px";
                height=windowClientWidth*0.8*0.7+"px";
                top=windowClientHeight-(windowClientWidth*0.8*0.7)+"px";
                left=windowClientWidth-(windowClientWidth*0.8)+"px";
            }
            /*设置body宽高*/
            oBody.style.width=windowClientWidth+"px";
            oBody.style.height=windowClientHeight+"px";
            /*设置背景宽高*/
            obac.style.width=windowClientWidth+"px";
            obac.style.height=windowClientHeight+"px";
            /*设置背景两张子图片宽高*/
            obac.children[0].style.width=100+"%";
            obac.children[0].style.height=100+"%";
            obac.children[1].style.width=100+"%";
            obac.children[1].style.height=100+"%";
            /*设置up、down*/
            $(".slideUpDown").css({
                width:windowClientWidth/5+"px",
                height:windowClientWidth/5+"px",
                position:"absolute",
                top:windowClientHeight-windowClientWidth/5+"px",
                left:(windowClientWidth/2)-(windowClientWidth/5/2)+"px",
            });
            $(".slideUpDown img").css({
                width:100+"%",
                height:100+"%",
            });
            /*随机音乐*/
            music();
            function music(){
                var n=Math.ceil(Math.random()*11);
                var url=n+".mp3"
                $("audio").attr("src",url);
            }
            /*设置随机歌词*/
            var songSplitArr=[];
            var str="";
            function randomSong(){
                var randomSongArrlength=Math.ceil(Math.random()*songArr.length);
                for(var i=0;i<randomSongArrlength;i++){
                    songSplitArr=songArr[i].split(",");
                    if(songSplitArr.length==1){
                        str=songSplitArr[0];
                    }
                    if(songSplitArr.length==2){
                        str=songSplitArr[0]+" <br> "+songSplitArr[1];
                    }
                    if(songSplitArr.length==3){
                        str=songSplitArr[0]+" <br> "+songSplitArr[1]+" <br> "+songSplitArr[2];
                    }
                }
                $("#bac p").html(str);
            }
            /*随机开关控制随机歌词的显示*/
            function randomTF(){
                var rTF=Math.floor(Math.random()*2);
                if(rTF==1){
                    randomSong();
                }
                if(rTF==0){
                    $("#bac p").html("");
                }
            }
            /*初始排列图片顺序*/
            for(var i=0;i<oDiv.length;i++){
                oDiv[i].style.zIndex=oDiv.length-i;
            }
            /*阻止移动端橡皮筋效果*/
            document.addEventListener('touchstart',function(e){
                e.preventDefault();
            })
            /*移动端判断是下滑还是上滑*/
            /*for(var i=0;i<oDiv.length;i++){
                oDiv[i].style.width=windowClientWidth+"px";
                oDiv[i].style.height=windowClientHeight+"px";
                oDiv[i].style.height=windowClientHeight+"px";
                oDiv[i].style.position="absolute";
                oDiv[i].style.top=0;
                oDiv[i].style.left=0;
                oDiv[i].style.transition=1+"s";
                oDiv[i].index=i;
                oDiv[i].addEventListener("touchstart",function(event){
                    var e=event.touches[0]||window.event;
                    startY=e.clientY;
                    oDiv[i].innerHTML=startY+"+"+endY;
                    e.preventDefault();
                },false);
                oDiv[i].addEventListener("touchend",function(event){
                    var e=event.changedTouches[0]||window.event;
                    endY=e.clientY;
                    if(endY>startY){
                        alert("向下滑动");
                    }else if(endY<startY){alert("向上滑动");
                        this.style.top=-this.offsetHeight+"px";
                        photo2();
                    }
                },false);
            }*/

            /*用鼠标测试*/
            /*for(var j=0;j<oDiv.length;j++){
             oDiv[j].index=j;
             oDiv[j].onclick=function(){ //向上
             if(this.index!=oDiv.length-1){
                 if(this.index==0){photo2();}
                 if(this.index==1){photo3();}
                 if(this.index==2){photo4();}
                 if(this.index==3){photo5();}
             this.style.top=-this.offsetHeight+"px";
             oDiv[this.index+1].style.top=0+"px";
             }
             }
             /!*oDiv[j].ondblclick=function(){
             if(this.index!=0){
             this.style.top=this.offsetHeight+"px";
             oDiv[this.index-1].style.top=0+"px";
             }
             }*!/
             }*/
            photo1();
            /*手机可行，正式代码在此*/
            for(var j=0;j<oDiv.length;j++){
                oDiv[j].index=j;
                oDiv[j].addEventListener("touchstart",function(event){
                    var e=event.touches[0]||window.event;
                    startY=e.clientY;
                    e.preventDefault();
                },false);
                oDiv[j].addEventListener("touchend",function(event){
                    var e=event.changedTouches[0]||window.event;
                    endY=e.clientY;
                    if(endY<startY){

                        if(this.index==oDiv.length-1){
                            /*alert("已经不能再向上滑动了");*/
                            return;
                        }

                        /*alert("向上滑动..");*/
                        randomTF();
                        randomBac();
                        $(".slideUpDown").hide();
                        if(this.index==oDiv.length-2){
                            $(".slideUpDown img").attr("src","images01/down.gif");
                            $(".slideUpDown").show();
                        }
                        if(this.index==0){photo2();}
                        if(this.index==1){photo3();}
                        if(this.index==2){photo4();}
                        if(this.index==3){photo5();}
                        if(this.index==4){photo6();}
                        if(this.index==5){photo7();}
                        this.style.top=-this.offsetHeight+"px";
                        oDiv[this.index+1].style.top=0+"px";
                    }
                    if(endY>startY){
                        if(this.index==0){
                            /*alert("已经不能再向下滑动了");*/
                            return;
                        }
                        /*alert("向下滑动..");*/
                        randomTF();
                        $(".slideUpDown").hide();
                        if(this.index==1){
                            $(".slideUpDown img").attr("src","images01/up.gif");
                            $(".slideUpDown").show();
                        }
                        randomBac();
                        if(this.index==1){photo1();}
                        if(this.index==2){photo2();}
                        if(this.index==3){photo3();}
                        if(this.index==4){photo4();}
                        if(this.index==5){photo5();}
                        if(this.index==6){photo6();}
                        if(this.index==7){photo7();}
                        this.style.top=this.offsetHeight+"px";
                        oDiv[this.index-1].style.top=0+"px";
                    }
                },false);
            }
            /*初始加载调用第一张相片特效*/
            /*photo1();*/
            /*背景图随机生成*/
            function randomBac(){
                var ranBacNum=Math.ceil(Math.random()*14);
                var bacStr="images01/bac"+ranBacNum+".jpg";

                $("#bac1").attr("src",bacStr);
                $("#bac1").fadeToggle();
                $("#bac2").attr("src",lastRanBacNum);
                $("#bac2").fadeToggle();


                lastRanBacNum=bacStr;
            }
            /*星星海特效*/
            starEff("a",0);
            starEff("b",1);
            starEff("c",2);
            starEff("b",3);
            starEff("c",4);
            function starEff(pin,index){
                var ranW=Math.floor(Math.random()*250+250);
                var ranH=Math.floor(Math.random()*250+250);

                setInterval(function(){
                    var oSpan=document.createElement("span");
                    with(oSpan.style){
                        /*backgroundImage="url('images01/a.png')";*/
                        display="inline-block";
                        width="50px";
                        height="50px";
                        position="absolute";
                        top=Math.floor(Math.random()*windowClientHeight)+"px";
                        left=Math.floor(Math.random()*windowClientWidth)+"px";
                    }
                    oStarEff.appendChild(oSpan);
                    var oImg=document.createElement("img");
                    oImg.src="images01/"+pin+".png";
                    with(oImg.style){
                        width=100+"%";
                        height=100+"%";
                    }
                    oSpan.appendChild(oImg);
                    oImg.style.transition="3s";
                    oImg.style.animation="ani 3s";
                    oStarEff.style.transition="3s";

                    /*oStarEff.style.transform="rotateZ("+90+"deg)"*/
                    $("#starEff").children().eq(index).animate({width:ranW,
                    height:ranW,top:Math.floor(Math.random()*windowClientHeight)-200,
                            left:Math.floor(Math.random()*windowClientWidth)-200+"px"
                    },400,function(){
                        oStarEff.style.transform="rotateZ(0deg)";
                        $("#starEff").children().eq(index).remove();});
                },800)
            }
            /*第一张相片特效*/
            function photo1(){

                clearInterval(timer);
                var w1=120;
                var h1=84;
                var n1=0;
                timer=setInterval(function(){
                    w1+=10;
                    h1+=7;
                    n1+=1;
                    if(w1>=windowClientWidth){
                        clearInterval(timer);
                    }
                    $("#div1 span").css({
                        background:"white",
                        opacity:0.3
                    })
                    $(".divBox").eq(0).css({display:"block",});
                    $("#div1").css({
                        display:"block",
                        width:w1+"px",
                        height:h1+"px",
                        lineHeight:h1+"px",
                        border: ""+n1+"px double white",
                        left:Math.floor(windowClientWidth/2)-Math.floor(w1/2)+"px",
                        top:Math.floor(windowClientHeight/2)-Math.floor(h1/2)+"px",})
                },30);
            }
            /*第二张相片特效*/
            function photo2(){
                clearInterval(timer);
                var w2=60;
                var h2=80;
                var n2=0;
                timer=setInterval(function(){
                    w2+=6.5;
                    h2+=8;
                    n2+=0.5;
                    if(w2>=windowClientWidth){
                        clearInterval(timer);
                    }
                    $("#div2 span").css({
                        background:"#2f6fad",
                        opacity:0.3
                    })
                    $(".divBox").eq(1).css({display:"block",});
                    $("#div2").css({
                        display:"block",
                        width:w2+"px",
                        height:h2+"px",
                        lineHeight:h2+"px",
                        border: ""+n2+"px groove #2f6fad",
                        left:Math.floor(windowClientWidth/2)-Math.floor(w2/2)+"px",
                        top:Math.floor(windowClientHeight/2)-Math.floor(h2/2)+"px",})
                },30);
            }
            /*第三张相片特效*/
            function photo3(){
                clearInterval(timer);
                var w3=120;
                var h3=84;
                var n3=0;
                timer=setInterval(function(){
                    w3+=10;
                    h3+=7;
                    n3+=1;
                    if(w3>=windowClientWidth){
                        clearInterval(timer);
                    }
                    $("#div3 span").css({
                        background:"cyan",
                        opacity:0.3
                    });
                    $(".divBox").eq(2).css({display:"block",});
                    $("#div3").css({
                        display:"block",
                        width:w3+"px",
                        height:h3+"px",
                        lineHeight:h3+"px",
                        border: ""+n3+"px ridge cyan",
                        left:Math.floor(windowClientWidth/2)-Math.floor(w3/2)+"px",
                        top:Math.floor(windowClientHeight/2)-Math.floor(h3/2)+"px",})
                },30);
            }
            /*第四张相片特效*/
            function photo4(){
                $("#div5").slideUp(500);
                $("#div6").slideUp(500)
                $("#div7").fadeOut(500);
                clearInterval(timer);
                var w4=120;
                var h4=160;
                var n4=0;
                timer=setInterval(function(){
                    w4+=9;
                    h4+=12;
                    n4+=1;
                    if(w4>=windowClientWidth){
                        clearInterval(timer);
                    }
                    $(".divBox").eq(3).css({display:"block",});
                    $("#div4 span").css({
                        background:"orange",
                        opacity:0.3
                    })
                    $("#div4").css({
                        display:"block",
                        width:w4+"px",
                        height:h4+"px",
                        lineHeight:h4+"px",
                        border: ""+n4+"px ridge orange",
                        left:Math.floor(windowClientWidth/2)-Math.floor(w4/2)+"px",
                        top:Math.floor(windowClientHeight/2)-Math.floor(h4/2)+"px",});
                },30);
            }
            /*第5板相片特效*/
            function photo5(){
                $(".divBox").eq(4).css({display:"block",});

                $("#div5").slideDown(500);

                $("#div7").delay(500).slideDown(500);

                $("#div6").delay(1000).fadeIn(1500);
                $("#div5 span").css({
                    background:"white",
                    opacity:0.3
                })
                $("#div6 span").css({
                    background:"white",
                    opacity:0.3
                })
                $("#div7 span").css({
                    background:"white",
                    opacity:0.3
                })

                $("#div8").fadeOut(500);
                $("#div9").animate({left:windowClientWidth,opacity:0},500);
                $("#div10").animate({left:-windowClientWidth*0.8,opacity:0},500);
                $("#div11").fadeOut(500);
            }
            /*第6板相片特效*/
            function photo6(){
                $(".divBox").eq(5).css({display:"block",});
                $("#div5").slideUp(500);
                $("#div6").slideUp(500)
                $("#div7").fadeOut(500);

                $("#div8").delay(1500).fadeIn(500);
                $("#div9").animate({left:windowClientWidth-(windowClientWidth*0.8),opacity:1},1500,"linear");
                $("#div10").animate({left:0+"px",opacity:1},1500,"linear");
                $("#div11").delay(1500).fadeIn(500);
                $("#div8").css({borderColor:"black"})
                $("#div9").css({borderColor:"black"})
                $("#div10").css({borderColor:"black"})
                $("#div11").css({borderColor:"black"})
            }
            /*第7板相片特效*/
            function photo7(){
                $(".divBox").eq(6).css({display:"block",});
                $("#div8").fadeOut(500);
                $("#div9").animate({left:windowClientWidth,opacity:0},500);
                $("#div10").animate({left:-windowClientWidth*0.8,opacity:0},500);
                $("#div11").fadeOut(500);

                clearInterval(timer);
                var w12=120;
                var h12=84;
                var n12=0;
                timer=setInterval(function(){
                    w12+=10;
                    h12+=7;
                    n12+=1;
                    if(w12>=windowClientWidth){
                        clearInterval(timer);
                    }
                    $(".divBox").eq(11).css({display:"block",});
                    $("#div12 span").css({
                        background:"red",
                        opacity:0.3
                    })
                    $("#div12").css({
                        display:"block",
                        width:w12+"px",
                        height:h12+"px",
                        lineHeight:h12+"px",
                        border: ""+n12+"px groove red",
                        left:Math.floor(windowClientWidth/2)-Math.floor(w12/2)+"px",
                        top:Math.floor(windowClientHeight/2)-Math.floor(h12/2)+"px",})
                },30);
            }

        }
    </script>
</head>
<body>
<audio src="" autoplay loop></audio>
<div id="bac"><p></p><img style="display: none" id="bac1" src="images01/bac1.jpg"><img  id="bac2" src="images01/bac0.jpg"><div class="slideUpDown"><img src="images01/up.gif"></div></div>
<div id="starEff"></div>
<div class="divBox"><div style="width: 120px;height:84px;display: block;" id="div1"><span class="mengban"></span><img src="images01/1.jpg"></div></div>
<div class="divBox"><div style="width: 60px;height:80px;display: block;" id="div2"><span class="mengban"></span><img src="images01/2.jpg"></div></div>
<div class="divBox"><div style="width: 120px;height:84px;display: block;" id="div3"><span class="mengban"></span><img src="images01/3.jpg"></div></div>
<div class="divBox"><div style="width: 120px;height:160px;display: block;" id="div4"><span class="mengban"></span><img src="images01/4.jpg"></div></div>
<div class="divBox">
    <div style="/*width: 120px;height:84px;*/display: none;" id="div5"><span class="mengban"></span><img src="images01/5.jpg"></div>
    <div style="/*width: 120px;height:160px;*/display: none;" id="div6"><span class="mengban"></span><img src="images01/6.jpg"></div>
    <div style="/*width: 160px;height:120px;*/display: none;" id="div7"><span class="mengban"></span><img src="images01/7.jpg"></div>
</div>

<div class="divBox">
    <div style="/*width: 120px;height:84px;*/display: none;" id="div8"><span class="mengban"></span><img src="images01/8.jpg"></div>
    <div style="/*width: 120px;height:84px;*/opacity: 0;" id="div9"><span class="mengban"></span><img src="images01/9.jpg"></div>
    <div style="/*width: 120px;height:84px;*/opacity: 0;" id="div10"><span class="mengban"></span><img src="images01/10.jpg"></div>
    <div style="/*width: 120px;height:84px;*/display: none;" id="div11"><span class="mengban"></span><img src="images01/11.jpg"></div>
</div>

<div class="divBox"><div style="width: 120px;height:84px;display: block;" id="div12"><span class="mengban"></span><img src="images01/12.jpg"></div></div>
</body>
</html>
